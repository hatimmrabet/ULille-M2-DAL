2022-11-29 09:21:24.527  INFO 10456 --- [restartedMain] dal.api.banque.BanqueApplication         : Starting BanqueApplication using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10456 (/Users/tarek/Desktop/DAL/dal-banque/target/classes started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:21:24.532  INFO 10456 --- [restartedMain] dal.api.banque.BanqueApplication         : No active profile set, falling back to 1 default profile: "default"
2022-11-29 09:21:24.598  INFO 10456 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-11-29 09:21:24.598  INFO 10456 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-11-29 09:21:24.937  INFO 10456 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:21:24.953  INFO 10456 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:21:25.174  INFO 10456 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2022-11-29 09:21:25.179  INFO 10456 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-11-29 09:21:25.179  INFO 10456 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.68]
2022-11-29 09:21:25.203  INFO 10456 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2022-11-29 09:21:25.203  INFO 10456 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 605 ms
2022-11-29 09:21:25.287  INFO 10456 --- [restartedMain] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@2798f0df]}, clusterSettings={hosts=[mongo:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:21:25.351  INFO 10456 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2022-11-29 09:21:25.442  INFO 10456 --- [cluster-ClusterId{value='6385c105c84b231cd5dcdc44', description='null'}-mongo:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server mongo:27017

com.mongodb.MongoSocketException: mongo: nodename nor servname provided, or not known
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:75) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
Caused by: java.net.UnknownHostException: mongo: nodename nor servname provided, or not known
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:52) ~[na:na]
	at java.base/java.net.InetAddress$PlatformResolver.lookupByName(InetAddress.java:1048) ~[na:na]
	at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1648) ~[na:na]
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:997) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1638) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1504) ~[na:na]
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.6.1.jar:na]
	... 6 common frames omitted

2022-11-29 09:21:25.489  INFO 10456 --- [restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1928595e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@494b4bef, org.springframework.security.web.context.SecurityContextPersistenceFilter@23198a6f, org.springframework.security.web.header.HeaderWriterFilter@289a500c, org.springframework.security.web.authentication.logout.LogoutFilter@5974e932, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44a28226, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4891ceea, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f5b5f29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@43db656d, org.springframework.security.web.session.SessionManagementFilter@263899e7, org.springframework.security.web.access.ExceptionTranslationFilter@7a3c5737, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@65d15bdd]
2022-11-29 09:21:25.599  INFO 10456 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2022-11-29 09:21:25.604  INFO 10456 --- [restartedMain] dal.api.banque.BanqueApplication         : Started BanqueApplication in 1.324 seconds (JVM running for 1.804)
2022-11-29 09:21:32.425  INFO 10471 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10471 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:21:32.425  INFO 10471 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:21:32.653  INFO 10471 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:21:32.671  INFO 10471 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:21:32.857  INFO 10471 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@48eb001a]}, clusterSettings={hosts=[mongo:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:21:32.858  INFO 10471 --- [cluster-ClusterId{value='6385c10c3e34de6d3803d0eb', description='null'}-mongo:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server mongo:27017

com.mongodb.MongoSocketException: mongo
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:75) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
Caused by: java.net.UnknownHostException: mongo
	at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:948) ~[na:na]
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:1032) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1638) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1504) ~[na:na]
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.6.1.jar:na]
	... 6 common frames omitted

2022-11-29 09:21:33.082  INFO 10471 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@357f6391, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@689faf79, org.springframework.security.web.context.SecurityContextPersistenceFilter@7f2c57fe, org.springframework.security.web.header.HeaderWriterFilter@486e9d1d, org.springframework.security.web.authentication.logout.LogoutFilter@224c7de4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a216eb4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@790d8fdd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6403a4a5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@582e9152, org.springframework.security.web.session.SessionManagementFilter@6839203b, org.springframework.security.web.access.ExceptionTranslationFilter@73893ec1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@25791d40]
2022-11-29 09:21:33.336  INFO 10471 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:21:33.336  INFO 10471 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:21:33.337  INFO 10471 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2022-11-29 09:21:33.345  INFO 10471 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.032 seconds (JVM running for 1.364)
2022-11-29 09:21:33.355  INFO 10471 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:21:33.355  INFO 10471 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:21:33.368  INFO 10471 --- [main] org.mongodb.driver.cluster               : Cluster description not yet available. Waiting for 30000 ms before timing out
2022-11-29 09:22:08.679  INFO 10496 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10496 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:22:08.680  INFO 10496 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:22:08.909  INFO 10496 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:22:08.925  INFO 10496 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:22:09.112  INFO 10496 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@34332b8d]}, clusterSettings={hosts=[mongo:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:22:09.113  INFO 10496 --- [cluster-ClusterId{value='6385c1310339666f0766225a', description='null'}-mongo:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server mongo:27017

com.mongodb.MongoSocketException: mongo
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:75) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar:na]
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
Caused by: java.net.UnknownHostException: mongo
	at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:948) ~[na:na]
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:1032) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1638) ~[na:na]
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1504) ~[na:na]
	at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.6.1.jar:na]
	... 6 common frames omitted

2022-11-29 09:22:09.337  INFO 10496 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7971c2a9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2fd39436, org.springframework.security.web.context.SecurityContextPersistenceFilter@5f8a02cf, org.springframework.security.web.header.HeaderWriterFilter@1a531422, org.springframework.security.web.authentication.logout.LogoutFilter@47a4eee2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@689faf79, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a090f62, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@559af296, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60b5e80d, org.springframework.security.web.session.SessionManagementFilter@43935e9c, org.springframework.security.web.access.ExceptionTranslationFilter@d5e575c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@dbed7fd]
2022-11-29 09:22:09.610  INFO 10496 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:22:09.610  INFO 10496 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:22:09.611  INFO 10496 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2022-11-29 09:22:09.620  INFO 10496 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.047 seconds (JVM running for 1.38)
2022-11-29 09:22:09.631  INFO 10496 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:22:09.631  INFO 10496 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:22:09.651  INFO 10496 --- [main] org.mongodb.driver.cluster               : Cluster description not yet available. Waiting for 30000 ms before timing out
2022-11-29 09:22:39.688  INFO 10496 --- [main] org.mongodb.driver.cluster               : Cluster description not yet available. Waiting for 30000 ms before timing out
2022-11-29 09:23:07.441  INFO 10513 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10513 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:23:07.443  INFO 10513 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:23:07.695  INFO 10513 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:23:07.712  INFO 10513 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:23:07.919  INFO 10513 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@3481ff98]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:23:07.932  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:23:07.941  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:23:07.942  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:23:08.150  INFO 10513 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@10f405ff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f27f59b, org.springframework.security.web.context.SecurityContextPersistenceFilter@486e9d1d, org.springframework.security.web.header.HeaderWriterFilter@74960e9d, org.springframework.security.web.authentication.logout.LogoutFilter@370ef50b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@69796bd0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5bda157e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67e0fd6d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c98b4eb, org.springframework.security.web.session.SessionManagementFilter@14fc9bd, org.springframework.security.web.access.ExceptionTranslationFilter@62c3f556, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6dcab9d9]
2022-11-29 09:23:08.385  INFO 10513 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:23:08.385  INFO 10513 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:23:08.386  INFO 10513 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2022-11-29 09:23:08.395  INFO 10513 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.13 seconds (JVM running for 1.878)
2022-11-29 09:23:08.405  INFO 10513 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:23:08.405  INFO 10513 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:23:08.421  INFO 10513 --- [main] org.mongodb.driver.cluster               : No server chosen by com.mongodb.client.internal.MongoClientDelegate$1@27261190 from cluster description ClusterDescription{type=REPLICA_SET, connectionMode=MULTIPLE, serverDescriptions=[ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:177864}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:179715}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-rtt-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:177858}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-rtt-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:179813}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:180075}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=234577333, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:23:08 CET 2022, lastUpdateTimeNanos=44354854764625}
2022-11-29 09:23:08.431  INFO 10513 --- [cluster-rtt-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:180074}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.432  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=241394166, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:23:08 CET 2022, lastUpdateTimeNanos=44354854764625}
2022-11-29 09:23:08.432  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=240694750, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:23:08 CET 2022, lastUpdateTimeNanos=44354854779958}
2022-11-29 09:23:08.432  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.432  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.432  INFO 10513 --- [cluster-ClusterId{value='6385c16b46af276518a1bdbb', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.528  INFO 10513 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179785}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:23:08.834  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:23:08.937  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c16c46af276518a1bdbc
2022-11-29 09:23:08.989  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:23:09.083  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c16d46af276518a1bdbd
2022-11-29 09:23:09.119  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Enlever 9 bois
2022-11-29 09:23:09.119  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Enlever 9 metal
2022-11-29 09:23:09.119  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Enlever 9 peinture
2022-11-29 09:23:09.438  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Creating transaction for quotation with id: 6385c16d46af276518a1bdbd
2022-11-29 09:23:09.503  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Buyer: test and seller: test2
2022-11-29 09:23:09.505  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Cherche 2 dal.api.banque.models.Stock@6badb08c dans d'autres banques
2022-11-29 09:23:09.517  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.115:30191
2022-11-29 09:23:09.541 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.115:30191 : I/O error on GET request for "http://172.28.101.115:30191/bank/stock": Connection refused; nested exception is java.net.ConnectException: Connection refused
2022-11-29 09:23:09.541  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.149
2022-11-29 09:23:09.598 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.149 : 404 : "{"message":"Supplier name is not found!"}"
2022-11-29 09:23:09.599  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.31
2022-11-29 09:23:09.889 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.31 : 404 Not Found: ""Vendor not found""
2022-11-29 09:23:09.889  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.171:8080
2022-11-29 09:23:09.958 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.171:8080 : 400 : "Account not found"
2022-11-29 09:23:09.959  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.179:8080
2022-11-29 09:23:09.999 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.179:8080 : 400 : "{"timestamp":"2022-11-29T08:22:56.942+00:00","status":400,"error":"Bad Request","path":"/bank/stock"}"
2022-11-29 09:23:09.999  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.134:8080
2022-11-29 09:23:10.022 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.134:8080 : 401 Unauthorized: "Unknown "fournisseur""
2022-11-29 09:23:10.023  INFO 10513 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.166:8080
2022-11-29 09:23:10.287 ERROR 10513 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.166:8080 : 404 : "{"timestamp":"2022-11-29T08:23:03.384+00:00","status":404,"error":"Not Found","path":"/bank/stock"}"
2022-11-29 09:23:10.289  INFO 10513 --- [main] dal.api.banque.services.AccountService   : No bank found for dal.api.banque.models.Stock@6badb08c with quantity 2
2022-11-29 09:23:10.289  INFO 10513 --- [main] d.api.banque.services.QuotationService   : Pas assez de stock pour chaise dans toutes les banques
2022-11-29 09:25:49.340  INFO 10523 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10523 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:25:49.340  INFO 10523 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:25:49.574  INFO 10523 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:25:49.595  INFO 10523 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:25:49.828  INFO 10523 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@5740ff5e]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:25:49.894  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:25:49.907  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:25:49.908  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:25:50.080  INFO 10523 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@411fa0ce, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@251d7fdd, org.springframework.security.web.context.SecurityContextPersistenceFilter@3f857e08, org.springframework.security.web.header.HeaderWriterFilter@18709cb2, org.springframework.security.web.authentication.logout.LogoutFilter@2f9b21d6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2fd39436, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@224c7de4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@36ad229b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78e68401, org.springframework.security.web.session.SessionManagementFilter@7c1503a3, org.springframework.security.web.access.ExceptionTranslationFilter@402f8592, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3db65c0d]
2022-11-29 09:25:50.323  INFO 10523 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:25:50.323  INFO 10523 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:25:50.324  INFO 10523 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2022-11-29 09:25:50.333  INFO 10523 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.238 seconds (JVM running for 1.662)
2022-11-29 09:25:50.337  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:179876}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-rtt-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:180113}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:180119}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:177916}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=306619375, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:25:50 CET 2022, lastUpdateTimeNanos=44516762760583}
2022-11-29 09:25:50.337  INFO 10523 --- [cluster-rtt-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:177913}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-rtt-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:179773}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=306285334, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:25:50 CET 2022, lastUpdateTimeNanos=44516762758833}
2022-11-29 09:25:50.338  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=306253500, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:25:50 CET 2022, lastUpdateTimeNanos=44516762777375}
2022-11-29 09:25:50.339  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.340  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.340  INFO 10523 --- [cluster-ClusterId{value='6385c20d133cb2789693793e', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.345  INFO 10523 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:25:50.345  INFO 10523 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:25:50.466  INFO 10523 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179812}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:25:50.733  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:25:50.915  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c20e133cb2789693793f
2022-11-29 09:25:50.965  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:25:51.059  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c20f133cb27896937940
2022-11-29 09:25:51.095  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Enlever 9 bois
2022-11-29 09:25:51.095  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Enlever 9 metal
2022-11-29 09:25:51.095  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Enlever 9 peinture
2022-11-29 09:25:51.372  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Creating transaction for quotation with id: 6385c20f133cb27896937940
2022-11-29 09:25:51.457  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Buyer: test and seller: test2
2022-11-29 09:25:51.458  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Cherche 5 dal.api.banque.models.Stock@114b2414 dans d'autres banques
2022-11-29 09:25:51.467  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.115:30191
2022-11-29 09:25:51.485 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.115:30191 : I/O error on GET request for "http://172.28.101.115:30191/bank/stock": Connection refused; nested exception is java.net.ConnectException: Connection refused
2022-11-29 09:25:51.485  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.149
2022-11-29 09:25:51.522 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.149 : 404 : "{"message":"Supplier name is not found!"}"
2022-11-29 09:25:51.522  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.31
2022-11-29 09:25:51.758 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.31 : 404 Not Found: ""Vendor not found""
2022-11-29 09:25:51.758  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.171:8080
2022-11-29 09:25:51.894 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.171:8080 : 400 : "Account not found"
2022-11-29 09:25:51.895  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.179:8080
2022-11-29 09:25:51.928 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.179:8080 : 400 : "{"timestamp":"2022-11-29T08:25:38.874+00:00","status":400,"error":"Bad Request","path":"/bank/stock"}"
2022-11-29 09:25:51.928  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.134:8080
2022-11-29 09:25:51.953 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.134:8080 : 401 Unauthorized: "Unknown "fournisseur""
2022-11-29 09:25:51.954  INFO 10523 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.166:8080
2022-11-29 09:25:52.127 ERROR 10523 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.166:8080 : 404 : "{"timestamp":"2022-11-29T08:25:45.334+00:00","status":404,"error":"Not Found","path":"/bank/stock"}"
2022-11-29 09:25:52.129  INFO 10523 --- [main] dal.api.banque.services.AccountService   : No bank found for dal.api.banque.models.Stock@114b2414 with quantity 5
2022-11-29 09:25:52.130  INFO 10523 --- [main] d.api.banque.services.QuotationService   : Pas assez de stock pour chaise dans toutes les banques
2022-11-29 09:27:19.413  INFO 10533 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10533 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:27:19.413  INFO 10533 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:27:19.736  INFO 10533 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:27:19.756  INFO 10533 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:27:20.033  INFO 10533 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@157ec23b]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:27:20.047  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:27:20.056  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:27:20.057  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:27:20.340  INFO 10533 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19fec3d6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5287ba5f, org.springframework.security.web.context.SecurityContextPersistenceFilter@696b52bc, org.springframework.security.web.header.HeaderWriterFilter@45d56062, org.springframework.security.web.authentication.logout.LogoutFilter@7d1c164a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@560271a1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@474749b8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@740a0d5e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@b768a65, org.springframework.security.web.session.SessionManagementFilter@23444a36, org.springframework.security.web.access.ExceptionTranslationFilter@224c7de4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6b27b2d0]
2022-11-29 09:27:20.515  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:177938}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.515  INFO 10533 --- [cluster-rtt-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:179860}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.515  INFO 10533 --- [cluster-rtt-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:180148}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.515  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:180138}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.515  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=317165750, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:27:20 CET 2022, lastUpdateTimeNanos=44606941450875}
2022-11-29 09:27:20.516  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=317417083, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:27:20 CET 2022, lastUpdateTimeNanos=44606941414416}
2022-11-29 09:27:20.516  INFO 10533 --- [cluster-rtt-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:177937}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.516  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:179884}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.516  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=317577500, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:27:20 CET 2022, lastUpdateTimeNanos=44606941450875}
2022-11-29 09:27:20.517  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.517  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.517  INFO 10533 --- [cluster-ClusterId{value='6385c2687c516c4b253c37ab', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:27:20.614  INFO 10533 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:27:20.614  INFO 10533 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:27:20.614  INFO 10533 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2022-11-29 09:27:20.624  INFO 10533 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.35 seconds (JVM running for 2.235)
2022-11-29 09:27:20.635  INFO 10533 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:27:20.635  INFO 10533 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:27:20.733  INFO 10533 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179882}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:27.984  INFO 10546 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10546 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:30:27.985  INFO 10546 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:30:28.225  INFO 10546 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:30:28.242  INFO 10546 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:30:28.475  INFO 10546 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@6dc9da2d]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:30:28.488  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:28.495  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:28.496  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:28.709  INFO 10546 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@69796bd0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@40df6090, org.springframework.security.web.context.SecurityContextPersistenceFilter@14fc9bd, org.springframework.security.web.header.HeaderWriterFilter@7d9c45ee, org.springframework.security.web.authentication.logout.LogoutFilter@5a090f62, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@34045582, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@443cdaa4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b41e1bf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8c0a23f, org.springframework.security.web.session.SessionManagementFilter@61037caf, org.springframework.security.web.access.ExceptionTranslationFilter@f723cdb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@65eb3597]
2022-11-29 09:30:28.919  INFO 10546 --- [cluster-rtt-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:177988}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.920  INFO 10546 --- [cluster-rtt-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:180196}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.919  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:180186}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.920  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:179953}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.919  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:177987}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.919  INFO 10546 --- [cluster-rtt-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:179952}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.920  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=304396083, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:30:28 CET 2022, lastUpdateTimeNanos=44795347980083}
2022-11-29 09:30:28.920  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=302964541, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:30:28 CET 2022, lastUpdateTimeNanos=44795347978083}
2022-11-29 09:30:28.920  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=303925500, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:30:28 CET 2022, lastUpdateTimeNanos=44795348213708}
2022-11-29 09:30:28.922  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.922  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.922  INFO 10546 --- [cluster-ClusterId{value='6385c324c37cf72e56275faa', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:28.970  INFO 10546 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:30:28.971  INFO 10546 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:30:28.971  INFO 10546 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2022-11-29 09:30:28.979  INFO 10546 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.331 seconds (JVM running for 1.828)
2022-11-29 09:30:28.989  INFO 10546 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:30:28.989  INFO 10546 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:30:29.086  INFO 10546 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179941}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:29.506  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:30:29.624  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c325c37cf72e56275fab
2022-11-29 09:30:29.676  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:30:29.964  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c325c37cf72e56275fac
2022-11-29 09:30:30.029  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Enlever 9 bois
2022-11-29 09:30:30.029  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Enlever 9 metal
2022-11-29 09:30:30.029  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Enlever 9 peinture
2022-11-29 09:30:30.282  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Creating transaction for quotation with id: 6385c325c37cf72e56275fac
2022-11-29 09:30:30.484  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Buyer: test and seller: test2
2022-11-29 09:30:30.485  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Cherche 2 dal.api.banque.models.Stock@311a09b2 dans d'autres banques
2022-11-29 09:30:30.494  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.115:30191
2022-11-29 09:30:30.513 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.115:30191 : I/O error on GET request for "http://172.28.101.115:30191/bank/stock": Connection refused; nested exception is java.net.ConnectException: Connection refused
2022-11-29 09:30:30.513  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.149
2022-11-29 09:30:30.566 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.149 : 404 : "{"message":"Supplier name is not found!"}"
2022-11-29 09:30:30.566  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.31
2022-11-29 09:30:30.736 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.31 : 404 Not Found: ""Vendor not found""
2022-11-29 09:30:30.736  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.171:8080
2022-11-29 09:30:30.934 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.171:8080 : 400 : "Account not found"
2022-11-29 09:30:30.934  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.179:8080
2022-11-29 09:30:31.009 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.179:8080 : 400 : "{"timestamp":"2022-11-29T08:30:17.961+00:00","status":400,"error":"Bad Request","path":"/bank/stock"}"
2022-11-29 09:30:31.009  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.134:8080
2022-11-29 09:30:31.023 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.134:8080 : 401 Unauthorized: "Unknown "fournisseur""
2022-11-29 09:30:31.023  INFO 10546 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.166:8080
2022-11-29 09:30:31.172 ERROR 10546 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.166:8080 : 404 : "{"timestamp":"2022-11-29T08:30:24.360+00:00","status":404,"error":"Not Found","path":"/bank/stock"}"
2022-11-29 09:30:31.175  INFO 10546 --- [main] dal.api.banque.services.AccountService   : No bank found for dal.api.banque.models.Stock@311a09b2 with quantity 2
2022-11-29 09:30:31.175  INFO 10546 --- [main] d.api.banque.services.QuotationService   : Pas assez de stock pour chaise dans toutes les banques
2022-11-29 09:30:35.983  INFO 10551 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10551 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:30:35.983  INFO 10551 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:30:36.208  INFO 10551 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:30:36.229  INFO 10551 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:30:36.471  INFO 10551 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@1dd74143]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:30:36.572  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:36.582  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:36.583  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:30:36.745  INFO 10551 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@b768a65, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6897a4a, org.springframework.security.web.context.SecurityContextPersistenceFilter@4f081b5d, org.springframework.security.web.header.HeaderWriterFilter@191c6e13, org.springframework.security.web.authentication.logout.LogoutFilter@6a98f353, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@41e9f86, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29013ef2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@265c1a7c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6986f93e, org.springframework.security.web.session.SessionManagementFilter@30a9e3db, org.springframework.security.web.access.ExceptionTranslationFilter@55846997, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@118041c7]
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:177988}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:179874}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-rtt-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:179874}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:180196}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-rtt-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:177988}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.839  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=149032542, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:30:36 CET 2022, lastUpdateTimeNanos=44803266939500}
2022-11-29 09:30:36.839  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=148961834, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:30:36 CET 2022, lastUpdateTimeNanos=44803266840208}
2022-11-29 09:30:36.838  INFO 10551 --- [cluster-rtt-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:180196}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.839  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=148401167, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:30:36 CET 2022, lastUpdateTimeNanos=44803266537041}
2022-11-29 09:30:36.840  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.841  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:36.841  INFO 10551 --- [cluster-ClusterId{value='6385c32c72151e42be3cda81', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:37.032  INFO 10551 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:30:37.032  INFO 10551 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:30:37.033  INFO 10551 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2022-11-29 09:30:37.043  INFO 10551 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.189 seconds (JVM running for 1.728)
2022-11-29 09:30:37.054  INFO 10551 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:30:37.054  INFO 10551 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:30:37.340  INFO 10551 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179914}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:30:37.618  INFO 10551 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:30:37.806  INFO 10551 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c32d72151e42be3cda82
2022-11-29 09:30:37.883  INFO 10551 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:30:37.975  INFO 10551 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c32d72151e42be3cda83
2022-11-29 09:30:38.015  INFO 10551 --- [main] dal.api.banque.services.AccountService   : Enlever 9 bois
2022-11-29 09:30:38.015  INFO 10551 --- [main] dal.api.banque.services.AccountService   : Enlever 9 metal
2022-11-29 09:30:38.015  INFO 10551 --- [main] dal.api.banque.services.AccountService   : Enlever 9 peinture
2022-11-29 09:32:55.091  INFO 10561 --- [main] dal.api.banque.BanqueApplicationTests    : Starting BanqueApplicationTests using Java 18.0.2.1 on MacBook-Air-de-Tarek.local with PID 10561 (started by tarek in /Users/tarek/Desktop/DAL/dal-banque)
2022-11-29 09:32:55.092  INFO 10561 --- [main] dal.api.banque.BanqueApplicationTests    : The following 1 profile is active: "test"
2022-11-29 09:32:55.323  INFO 10561 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2022-11-29 09:32:55.341  INFO 10561 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 3 MongoDB repository interfaces.
2022-11-29 09:32:55.659  INFO 10561 --- [main] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.6.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "13.0"}, "platform": "Java/Oracle Corporation/18.0.2.1+1-1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='admin', source='admin', password=<hidden>, mechanismProperties=<hidden>}, streamFactoryFactory=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.Jep395RecordCodecProvider@1d408060]}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.ixeky8x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-o068so-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='30000 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, sendBufferSize=0}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, sendBufferSize=0}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, contextProvider=null}
2022-11-29 09:32:55.675  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:32:55.682  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:32:55.682  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-srv-cluster0.ixeky8x.mongodb.net] org.mongodb.driver.cluster               : Adding discovered server ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017 to client view of cluster
2022-11-29 09:32:55.900  INFO 10561 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3520958b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6cc64028, org.springframework.security.web.context.SecurityContextPersistenceFilter@21390938, org.springframework.security.web.header.HeaderWriterFilter@7926352f, org.springframework.security.web.authentication.logout.LogoutFilter@1b24ea2a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1d289d3f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7a388990, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13213f26, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@291a4791, org.springframework.security.web.session.SessionManagementFilter@619c93ca, org.springframework.security.web.access.ExceptionTranslationFilter@60dc1a4e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3709748f]
2022-11-29 09:32:56.145  INFO 10561 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2022-11-29 09:32:56.145  INFO 10561 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2022-11-29 09:32:56.146  INFO 10561 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2022-11-29 09:32:56.154  INFO 10561 --- [main] dal.api.banque.BanqueApplicationTests    : Started BanqueApplicationTests in 1.336 seconds (JVM running for 1.722)
2022-11-29 09:32:56.163  INFO 10561 --- [main] dal.api.banque.services.BanqueService    : Creation de la banque
2022-11-29 09:32:56.164  INFO 10561 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:32:56.177  INFO 10561 --- [main] org.mongodb.driver.cluster               : No server chosen by com.mongodb.client.internal.MongoClientDelegate$1@5350ab17 from cluster description ClusterDescription{type=REPLICA_SET, connectionMode=MULTIPLE, serverDescriptions=[ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}]}. Waiting for 30000 ms before timing out
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-rtt-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:5, serverValue:179961}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:2, serverValue:179755}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-rtt-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:1, serverValue:178019}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:4, serverValue:180231}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:6, serverValue:178021}] to ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=321298458, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000001b, setVersion=2, topologyVersion=TopologyVersion{processId=637bdd976a5cdf9a7f74ecc0, counter=6}, lastWriteDate=Tue Nov 29 09:32:56 CET 2022, lastUpdateTimeNanos=44942609598166}
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=319959791, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdc4d72627276cd694ff9, counter=5}, lastWriteDate=Tue Nov 29 09:32:56 CET 2022, lastUpdateTimeNanos=44942609598166}
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-rtt-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:3, serverValue:180234}] to ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.180  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=320122041, setName='atlas-o068so-shard-0', canonicalAddress=ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, hosts=[ac-zmrs4ec-shard-00-00.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-01.ixeky8x.mongodb.net:27017, ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017', tagSet=TagSet{[Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='AWS'}, Tag{name='region', value='EU_WEST_3'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=2, topologyVersion=TopologyVersion{processId=637bdea467f0b383132b77fc, counter=3}, lastWriteDate=Tue Nov 29 09:32:56 CET 2022, lastUpdateTimeNanos=44942609609125}
2022-11-29 09:32:56.181  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max election id to 7fffffff000000000000001b from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.181  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Setting max set version to 2 from replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.181  INFO 10561 --- [cluster-ClusterId{value='6385c3b74602f63ce808f91d', description='null'}-ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017] org.mongodb.driver.cluster               : Discovered replica set primary ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.267  INFO 10561 --- [main] org.mongodb.driver.connection            : Opened connection [connectionId{localValue:7, serverValue:179877}] to ac-zmrs4ec-shard-00-02.ixeky8x.mongodb.net:27017
2022-11-29 09:32:56.391  INFO 10561 --- [main] dal.api.banque.services.BanqueService    : Recuperation des données de la banque
2022-11-29 09:32:56.639  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:32:57.409  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c3b84602f63ce808f91e
2022-11-29 09:32:57.479  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Creating quotation for seller: test and buyer: test2
2022-11-29 09:32:57.791  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Quotation created with id: 6385c3b94602f63ce808f91f
2022-11-29 09:32:57.857  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Enlever 9 bois
2022-11-29 09:32:57.857  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Enlever 9 metal
2022-11-29 09:32:57.857  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Enlever 9 peinture
2022-11-29 09:32:57.978  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Creating transaction for quotation with id: 6385c32d72151e42be3cda83
2022-11-29 09:32:58.251  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Buyer: test and seller: test2
2022-11-29 09:32:58.252  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Cherche 2 dal.api.banque.models.Stock@56e8a8a0 dans d'autres banques
2022-11-29 09:32:58.263  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.115:30191
2022-11-29 09:32:58.301 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.115:30191 : I/O error on GET request for "http://172.28.101.115:30191/bank/stock": Connection refused; nested exception is java.net.ConnectException: Connection refused
2022-11-29 09:32:58.301  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.149
2022-11-29 09:32:58.351 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.149 : 404 : "{"message":"Supplier name is not found!"}"
2022-11-29 09:32:58.351  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.31
2022-11-29 09:32:58.446 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.31 : 404 Not Found: ""Vendor not found""
2022-11-29 09:32:58.446  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.171:8080
2022-11-29 09:32:58.559 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.171:8080 : 400 : "Account not found"
2022-11-29 09:32:58.560  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.100.179:8080
2022-11-29 09:32:58.582 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.100.179:8080 : 400 : "{"timestamp":"2022-11-29T08:32:45.532+00:00","status":400,"error":"Bad Request","path":"/bank/stock"}"
2022-11-29 09:32:58.582  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.134:8080
2022-11-29 09:32:58.598 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.134:8080 : 401 Unauthorized: "Unknown "fournisseur""
2022-11-29 09:32:58.598  INFO 10561 --- [main] dal.api.banque.services.AccountService   : Requesting 172.28.101.166:8080
2022-11-29 09:32:58.767 ERROR 10561 --- [main] dal.api.banque.services.AccountService   : Error while requesting bank 172.28.101.166:8080 : 404 : "{"timestamp":"2022-11-29T08:32:51.950+00:00","status":404,"error":"Not Found","path":"/bank/stock"}"
2022-11-29 09:32:58.770  INFO 10561 --- [main] dal.api.banque.services.AccountService   : No bank found for dal.api.banque.models.Stock@56e8a8a0 with quantity 2
2022-11-29 09:32:58.770  INFO 10561 --- [main] d.api.banque.services.QuotationService   : Pas assez de stock pour chaise dans toutes les banques
